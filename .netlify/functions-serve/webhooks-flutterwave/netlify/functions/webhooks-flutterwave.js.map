{
  "version": 3,
  "sources": ["../../../../nardopay/netlify/functions/webhooks-flutterwave.ts"],
  "sourceRoot": "C:/Users/SMOYO/AppData/Local/Temp/tmp-18404-rmlLwkLmjsYb",
  "sourcesContent": ["import type { Handler } from '@netlify/functions'\r\n\r\nconst json = (statusCode: number, data: unknown) => ({\r\n\tstatusCode,\r\n\theaders: { 'content-type': 'application/json' },\r\n\tbody: JSON.stringify(data)\r\n})\r\n\r\nexport const handler: Handler = async (event) => {\r\n\tif (event.httpMethod !== 'POST') return json(405, { error: 'Method Not Allowed' })\r\n\tconst secretHash = process.env.FLW_SECRET_HASH\r\n\tconst header = event.headers['verif-hash'] || event.headers['Verif-Hash']\r\n\tif (!secretHash || !header || header !== secretHash) {\r\n\t\treturn json(401, { error: 'Invalid signature' })\r\n\t}\r\n\ttry {\r\n\t\tconst payload = event.body ? JSON.parse(event.body) : {}\r\n\t\t// TODO: persist normalized transaction in Supabase\r\n\t\treturn json(200, { received: true })\r\n\t} catch (e: any) {\r\n\t\treturn json(400, { error: 'Bad Request', details: e?.message || String(e) })\r\n\t}\r\n}\r\n\r\n\r\n"],
  "mappings": ";;;;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA,IAAM,OAAO,CAAC,YAAoB,UAAmB;AAAA,EACpD;AAAA,EACA,SAAS,EAAE,gBAAgB,mBAAmB;AAAA,EAC9C,MAAM,KAAK,UAAU,IAAI;AAC1B;AAEO,IAAM,UAAmB,OAAO,UAAU;AAChD,MAAI,MAAM,eAAe,OAAQ,QAAO,KAAK,KAAK,EAAE,OAAO,qBAAqB,CAAC;AACjF,QAAM,aAAa,QAAQ,IAAI;AAC/B,QAAM,SAAS,MAAM,QAAQ,YAAY,KAAK,MAAM,QAAQ,YAAY;AACxE,MAAI,CAAC,cAAc,CAAC,UAAU,WAAW,YAAY;AACpD,WAAO,KAAK,KAAK,EAAE,OAAO,oBAAoB,CAAC;AAAA,EAChD;AACA,MAAI;AACH,UAAM,UAAU,MAAM,OAAO,KAAK,MAAM,MAAM,IAAI,IAAI,CAAC;AAEvD,WAAO,KAAK,KAAK,EAAE,UAAU,KAAK,CAAC;AAAA,EACpC,SAAS,GAAQ;AAChB,WAAO,KAAK,KAAK,EAAE,OAAO,eAAe,SAAS,GAAG,WAAW,OAAO,CAAC,EAAE,CAAC;AAAA,EAC5E;AACD;",
  "names": []
}
